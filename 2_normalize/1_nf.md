# 第 1 正規形

## 第１正規形とは？

- シンプルなドメイン（定義域）上で定義された関係（リレーション）

- 関係（リレーション）スキーマ R が第１正規形（the first normal from, 1NF）であるとは、R を定義するすべてのドメインがシンプルである時をいう

- [ドメインについて](../guide/term.md#ドメイン)

## シンプルなドメインってなんだ？

- **属性がすべて単一値をとる** こと

- **第１正規形では、とにかく属性が単一値になることを目指せばいい**

## シンプルなドメインにする方法は？

- ドメインから **直積集合** を排除する

- ドメインから **冪集合** を排除する

- **候補キー** を決定する

- **主キー** を決定する

## ドメインの直積集合とは？

- 集合の集まりで、各集合を組にしたもの

- [ドメインの直積集合について](../guide/domain.md#ドメインの直積集合について)

## ドメインの冪集合とは？

- 与えられた集合から、その部分集合を基として含む集合のこと

- [ドメインの冪集合について](../guide/domain.md#ドメインの冪集合について)

## 候補キーとは？

- **関係（リレーション）のタプルを一意に識別** できる属性 or 属性の組のうち **極小** の属性

- **関係（リレーション）のタプルを一意に識別** について：一意であれば、すべての属性を含むのを許容

- 属性の組のうち **極小** の属性について：1 つでも属性が欠落すると、その時点で一意ではなくなる属性 or 属性の組

- 1 つとは限らないのと、候補キーは挙げられる限り全て挙げること

### 例.「受注（受注 ID, 顧客 ID, 商品 ID, 数量, 受注日）」リレーションの候補キーを列挙

- 条件

  - 同じ顧客から全く同じ日時に受注されることはないとする

- 結果

  | 候補キー                   | 解説                                                                                                                                                                                     |
  | -------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
  | {受注 ID}                  | 受注 ID は、各受注を一意に識別するために設計された属性なので、候補キーとして選択される                                                                                                   |
  | {顧客 ID, 商品 ID, 受注日} | この組み合わせは、ある顧客が特定の日に特定の商品を注文したことを一意に識別できる<br><br>ただし、同じ顧客が同じ日に同じ商品を複数回注文する可能性がある場合、この候補キーでは不十分となる |

## 主キーとは？

- 候補キーの中から 1 つ選んだもの

- 主キーの制約

  1. 主キーはタプルの一意識別能力を備えていること
  2. 主キーを構成する属性は空値（NULL）を取らないこと
